<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.3.0 -->
<title>Admin user not logging in after upgrade to 151</title>
<meta property="og:title" content="atutorlangs.github.io" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="ATutor is an Open Source Web-based Learning Management System (LMS)." />
<meta property="og:description" content="ATutor is an Open Source Web-based Learning Management System (LMS)" />
<link rel="canonical" href="https://atutorlangs.github.io/" />
<meta property="og:url" content="https://atutorlangs.github.io/" />
<meta property="og:site_name" content="atutorlangs.github.io" />
<script type="application/ld+json">
{"name":"atutorlangs.github.io","description":"ATutor is an Open Source Web-based Learning Management System (LMS)","author":null,"@type":"WebSite","url":"https://atutorlangs.github.io/","image":null,"publisher":null,"headline":"atutorlangs.github.io","dateModified":null,"datePublished":null,"sameAs":null,"mainEntityOfPage":null,"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/assets/css/style.css?v=d21f7591e4074c34581bb4e6987280a5a8e29a48">
  </head>
  <body>
    <section class="page-header1">
     
    </section>
    <section class="main-content">
   	<a id="content" title="content area"></a>
	<div class="cd-fixed-bg cd-bg-1">
	<div class="tpbg">
		    <h1><em>AT</em>utor</h1>
	    <h2>Learning Management Tools</h2>
	    <br />
	    </div>
	</div>
	<div class="cd-scrolling-bg cd-color-2">
        <div class="clbg" style=""> 
        <div class="sidemenu1">
        <!-- Belongs at: /_includes/navigation.html -->
<nav>
<h3><a href="https://atutor.github.io/">Home</a></h3>
    
    <ul>
    <li><h3>ATutor LMS</h3>
  
        
        
          <li class=""><a href="https://atutor.github.io/atutor/index.html">ATutor Details</a></li>
        
        
          <li class=""><a href="https://atutor.github.io/atutor/downloads.html">Downloads</a></li>
        
        
          <li class=""><a href="https://atutor.github.io/atutor/features.html">Features</a></li>
        
        
          <li class=""><a href="https://atutor.github.io/atutor/docs/index.html">Documentation</a></li>
        
        
          <li class=""><a href="https://atutor.github.io/atutor/modules.html">Modules</a></li>
        
        
          <li class=""><a href="https://atutor.github.io/atutor/themes.html">Themes</a></li>
        
        
          <li class=""><a href="https://atutorlangs.github.io/index.html">Translation</a></li>
        
        
          <li class=""><a href="https://atutor.github.io/atutor/repositories.html">Code Repositories</a></li>
        
        
          <li class=""><a href="https://atutorlangs.github.io/atutor/archive/exported_forum1.html">Support Forum Archive</a></li>
        
      </ul>
  
    <ul>
    <li><h3>AContent LCMS</h3>
  
        
        
          <li class=""><a href="https://atutor.github.io/acontent/index.html">AContent Details</a></li>
        
        
          <li class=""><a href="https://atutor.github.io/acontent/downloads.html">Downloads</a></li>
        
        
          <li class=""><a href="https://atutor.github.io/acontent/docs/index.html">Documentation</a></li>
        
        
          <li class=""><a href="https://atutor.github.io/acontent/languages.html">Translation</a></li>
        
      </ul>
  
    <ul>
    <li><h3>Developers</h3>
  
        
        
          <li class=""><a href="https://atutor.github.io/developer/guidelines.html">Developer Docs</a></li>
        
        
          <li class=""><a href="https://atutor.github.io/developer/modules.html">Module Developer</a></li>
        
        
          <li class=""><a href="https://atutor.github.io/developer/languages.html">Translation</a></li>
        
        
          <li class=""><a href="https://github.com/atutor/ATutor/issues">Report Issues</a></li>
        
      </ul>
  
</nav>
        <hr>
        <script>
          (function() {
            var cx = '003504471195032332048:igzbiihmmcg';
            var gcse = document.createElement('script');
            gcse.type = 'text/javascript';
            gcse.async = true;
            gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(gcse, s);
          })();
        </script>
        <div class="gsearch"><gcse:searchbox-only></gcse:searchbox-only>
                </div>
                <hr />
             <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
             <!-- githubfoot -->
             <ins class="adsbygoogle"
                  style="display:block"
                  data-ad-client="ca-pub-2250446123648311"
                  data-ad-slot="4063107943"
                  data-ad-format="auto"></ins>
             <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
             </script>
        </div>
        <div class="contentstart">
        <ol class="breadcrumbs">
            <li><a href="https://atutor.github.io/">Home</a></li>
            
        </ol>
        <div class='threadlist'>
<br /><div><a href='exported_forum1.html' class='midtext'>Back to: Thread list</a></div>
<br /><br /><div><strong>Pages:</strong><a href="exported_forum1.html?page=1">1</a> <a href="exported_forum2.html?page=2">2</a> <a href="exported_forum3.html?page=3">3</a> <a href="exported_forum4.html?page=4">4</a> <a href="exported_forum5.html?page=5">5</a> <a href="exported_forum6.html?page=6">6</a> <a href="exported_forum7.html?page=7">7</a> <a href="exported_forum8.html?page=8">8</a> <a href="exported_forum9.html?page=9">9</a> <a href="exported_forum10.html?page=10">10</a> <a href="exported_forum11.html?page=11">11</a> <strong><a href="exported_forum12.html">12</a></strong> <a href="exported_forum13.html?page=13">13</a> <a href="exported_forum14.html?page=14">14</a> <a href="exported_forum15.html?page=15">15</a> </div>
<div><p><br /><h3>Admin user not logging in after upgrade to 151</h3></div><br />
<div><ul class='forum-thread'>

	<li class="even">
		<a name="5480"></a>
		<div class="forum-post-author">
			<label class="title">lelchuck</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2005-08-17 09:49:23</p>
            </div>
            <div class="postheader"><h3>Admin user not logging in after upgrade to 151</h3></div>
				
			<div class="body">
				<p>Could be just my upgrade but below are the error messages I get when trying to login as system admin.<br />
<br />
1. I successfully did the upgrade (renamed my old install folderatutor15) to a test site<br />
2. I tried logging in as admin for my site:<br />
    http://10.0.1.4/atutor/login.php ... results below<br />
3.  I tried logging in as admin for my site:<br />
     http://10.0.1.4/atutor15/login.php ... success to the old install<br />
4. I then changed <br />
     http://10.0.1.4/atutor15/admin/index.php in my url to<br />
     http://10.0.1.4/atutor/admin/index.php   .and I am at the admin section of my new install<br />
<br />
=============<br />
Errors from trying to  tried log in as admin for my site:<br />
    http://10.0.1.4/atutor/login.php<br />
<br />
<br />
Warning: mysql_fetch_assoc(): supplied argument is not a valid MySQL result resource in /Library/Apache2/htdocs/atutor/login.php on line 102<br />
<br />
Warning: Cannot modify header information - headers already sent by (output started at /Library/Apache2/htdocs/atutor/login.php:102) in /Library/Apache2/htdocs/atutor/login.php on line 155<br />
<br />
Warning: Cannot modify header information - headers already sent by (output started at /Library/Apache2/htdocs/atutor/login.php:102) in /Library/Apache2/htdocs/ATutor/include/header.inc.php on line 17<br />
<br />
Warning: Cannot modify header information - headers already sent by (output started at /Library/Apache2/htdocs/atutor/login.php:102) in /Library/Apache2/htdocs/ATutor/include/classes/Language/Language.class.php on line 117<br />
<br />
======<br />
<br />
cheers<br />
larry<br />
<br />
====<br />
<br />
ATutor Version:	1.5.1 (build r5269 - 2005-08-16 12:59:49)<br />
Operating System:	Darwin 7.9.0 Darwin Kernel Version 7.9.0: Wed Mar 30 20:11:17 PST 2005; root:xnu/xnu-517.12.7.obj~1/RELEASE_PPC Power Macintosh<br />
Web Server:	Apache/2.0.52 (Unix) PHP/4.3.9 DAV/2<br />
PHP Version:	4.3.9<br />
MySQL Version:	4.0.21 Complete MySQL by Server Logistics</p>
			</div>
		</div>
	</li>

	<li class="odd">
		<a name="5481"></a>
		<div class="forum-post-author">
			<label class="title">heidi</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2005-08-17 10:00:42</p>
            </div>
            <div class="postheader"><h3>upgrade</h3></div>
				
			<div class="body">
				<p>it seems like your database isn't correct/hasn't been updated properly.  did the upgrading process go smoothly?  are you sure you're using the updated database?</p>
			</div>
		</div>
	</li>

	<li class="even">
		<a name="5482"></a>
		<div class="forum-post-author">
			<label class="title">lelchuck</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2005-08-17 10:14:53</p>
            </div>
            <div class="postheader"><h3>Upgrade to 1.5.1</h3></div>
				
			<div class="body">
				<p>I believe so ... it added a couple of new tables ....<br />
<br />
I can login as any user<br />
<br />
I'll trash the upgrade and do it again .... will report back<br />
<br />
larry</p>
			</div>
		</div>
	</li>

	<li class="odd">
		<a name="5483"></a>
		<div class="forum-post-author">
			<label class="title">lelchuck</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2005-08-17 10:23:32</p>
            </div>
            <div class="postheader"><h3>Re-Install</h3></div>
				
			<div class="body">
				<p>This time:<br />
<br />
Connected to database atutor successfully.<br />
Table handbook_notes already exists. Skipping.<br />
Successful update from version 1.5 to 1.5.1.<br />
Table language_text created successfully.<br />
===<br />
Same issue: It will not take the admin user/pass<br />
===<br />
<br />
The following errors occurred:<br />
Invalid login/password combination.<br />
<br />
==<br />
Warning: mysql_fetch_assoc(): supplied argument is not a valid MySQL result resource in /Library/Apache2/htdocs/atutor/login.php on line 102<br />
<br />
Warning: Cannot modify header information - headers already sent by (output started at /Library/Apache2/htdocs/atutor/login.php:102) in /Library/Apache2/htdocs/atutor/login.php on line 155<br />
<br />
Warning: Cannot modify header information - headers already sent by (output started at /Library/Apache2/htdocs/atutor/login.php:102) in /Library/Apache2/htdocs/ATutor/include/header.inc.php on line 17<br />
<br />
Warning: Cannot modify header information - headers already sent by (output started at /Library/Apache2/htdocs/atutor/login.php:102) in /Library/Apache2/htdocs/ATutor/include/classes/Language/Language.class.php on line 117<br />
<br />
larry</p>
			</div>
		</div>
	</li>

	<li class="even">
		<a name="5485"></a>
		<div class="forum-post-author">
			<label class="title">joel</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2005-08-17 11:15:56</p>
            </div>
            <div class="postheader"><h3>.</h3></div>
				
			<div class="body">
				<p>are you using any special characters in your admin username or password?</p>
			</div>
		</div>
	</li>

	<li class="odd">
		<a name="5489"></a>
		<div class="forum-post-author">
			<label class="title">lelchuck</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2005-08-17 13:18:42</p>
            </div>
            <div class="postheader"><h3>user/pass</h3></div>
				
			<div class="body">
				<p>No Joel<br />
<br />
Admin user is a common word and password is a combination of letters and digits only<br />
<br />
 (My personal instructor login does have a period in it though)<br />
<br />
larry</p>
			</div>
		</div>
	</li>

	<li class="even">
		<a name="5555"></a>
		<div class="forum-post-author">
			<label class="title">traguin</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2005-08-22 04:13:22</p>
            </div>
            <div class="postheader"><h3>Same problem with admin account</h3></div>
				
			<div class="body">
				<p>I have the same problem after successfully upgrading from ATutor 1.5 to 1.5.1.<br />
<br />
Upgrade went smoothly but I can't log in with my admin account (other accounts work). <br />
<br />
The same error occurs also when trying to log in with an unexisting account... <br />
<br />
After looking at the source code for login.php, on line 99:<br />
<br />
$sql = "SELECT login, `privileges`, language FROM ".TABLE_PREFIX."admins WHERE login='$this_login' AND PASSWORD(password)=PASSWORD('$this_password') AND `privileges`>0";<br />
<br />
should be changed to:<br />
<br />
$sql = "SELECT login, `privileges` FROM ".TABLE_PREFIX."admins WHERE login='$this_login' AND PASSWORD(password)=PASSWORD('$this_password') AND `privileges`>0";<br />
<br />
Since the field "language" is not in the table AT_admins. This fixes the problems.<br />
<br />
I'm not sure this is the correct fix since maybe 1.5.1 was supposed to add a language column in the admins table.</p>
			</div>
		</div>
	</li>

	<li class="odd">
		<a name="5563"></a>
		<div class="forum-post-author">
			<label class="title">joel</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2005-08-22 10:24:36</p>
            </div>
            <div class="postheader"><h3>.</h3></div>
				
			<div class="body">
				<p>Thanks.<br />
<br />
For some reason the language field was not included in the 1.5.1 upgrade SQL, although it does appear in the 1.5 schema.</p>
			</div>
		</div>
	</li>

	<li class="even">
		<a name="5605"></a>
		<div class="forum-post-author">
			<label class="title">shaun_dark_lord</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2005-08-24 07:39:17</p>
            </div>
            <div class="postheader"><h3>Me Too :(</h3></div>
				
			<div class="body">
				<p>I\'ve got the exact same problem - The upgrade went fine, and all my users are fine - But I can\'t login to my admin account.<br />
<br />
I\'ve checked the admin details in SQL - Table at_admins shows the correct username, email address and password.<br />
<br />
I\'ve tried registering with the admin username - atutor reports that the username is already in use.<br />
<br />
I\'ve tried the password reminder - It reports that there is no user with that email address.<br />
<br />
Any ideas?</p>
			</div>
		</div>
	</li>

	<li class="odd">
		<a name="5606"></a>
		<div class="forum-post-author">
			<label class="title">shaun_dark_lord</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2005-08-24 07:42:43</p>
            </div>
            <div class="postheader"><h3>:)</h3></div>
				
			<div class="body">
				<p>I tried traguin's fix - That works.</p>
			</div>
		</div>
	</li>

	<li class="even">
		<a name="5748"></a>
		<div class="forum-post-author">
			<label class="title">park</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2005-09-08 13:56:47</p>
            </div>
            <div class="postheader"><h3>Me Too but  :)</h3></div>
				
			<div class="body">
				<p>Same as, I tried traguin's fix - That works.</p>
			</div>
		</div>
	</li>

	<li class="odd">
		<a name="5985"></a>
		<div class="forum-post-author">
			<label class="title">StudyItOnline</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2005-10-01 01:38:13</p>
            </div>
            <div class="postheader"><h3>Admin account login problems with 1.5.1pl</h3></div>
				
			<div class="body">
				<p>I\'m having trouble logging in with my admin account as well.  My other accounts work fine.  It\'s only the admin account that is problemating so far.<br />
<br />
Things to describe: <br />
  operating system - Linux<br />
<br />
  version of ATutor - 1.5.1pl<br />
<br />
  versions of php - 4.3.11<br />
<br />
  version of mysq l - 4.0.25-standard-log<br />
<br />
  webserver & version -  Apache 1.3.33 (Unix)<br />
<br />
  copies of error messages -<br />
<br />
Warning: mysql_fetch_assoc(): supplied argument is not a valid MySQL result resource in /home/kthulah/public_html/studyitonline/courses/ATutor153/login.php on line 102<br />
<br />
Warning: Cannot modify header information - headers already sent by (output started at /home/kthulah/public_html/studyitonline/courses/ATutor153/login.php:102) in /home/kthulah/public_html/studyitonline/courses/ATutor153/login.php on line 155<br />
<br />
Warning: Cannot modify header information - headers already sent by (output started at /home/kthulah/public_html/studyitonline/courses/ATutor153/login.php:102) in /home/kthulah/public_html/studyitonline/courses/ATutor153/include/header.inc.php on line 17<br />
<br />
Warning: Cannot modify header information - headers already sent by (output started at /home/kthulah/public_html/studyitonline/courses/ATutor153/login.php:102) in /home/kthulah/public_html/studyitonline/courses/ATutor153/include/classes/Language/Language.class.php on line 117<br />
<br />
  changes to default settings -  traguin\'s fix (which didn\'t work, or maybe I was shooting for the wrong problem)<br />
<br />
  web browser being used - IE<br />
<br />
  and anything else relevant -  My admin username has an underscore in it.  I don\'t know if that\'s the problem.  The password is letters and numbers.</p>
			</div>
		</div>
	</li>

	<li class="even">
		<a name="5995"></a>
		<div class="forum-post-author">
			<label class="title">greg</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2005-10-01 20:12:53</p>
            </div>
            <div class="postheader"><h3>Check admin table</h3></div>
				
			<div class="body">
				<p>Check the admin table in the ATutor database to make sure your admin user exists there. If not recreate the user manually.<br />
<br />
Make sure there is no trailing space at the end of the login.php file (or any other file you may have edited). If there is delete it and check your editor's setting and set it to use Unix end of line characters. It will be a properties setting somewhere in the editor.<br />
<br />
What version did you upgrade from?</p>
			</div>
		</div>
	</li>

	<li class="odd">
		<a name="6000"></a>
		<div class="forum-post-author">
			<label class="title">StudyItOnline</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2005-10-02 00:25:56</p>
            </div>
            <div class="postheader"><h3>Tired of fighting the thing</h3></div>
				
			<div class="body">
				<p>I was using Wordpad as an editor, and didn't do anything to the end of the file...only the line that was supposed to be fixed, and as far as I know, there are not spaces at the end of it.  I wouldn't know how to set Wordpad to use Unix ends of line characters.<br />
<br />
I checked the admin table already, and I am there.  I was upgrading from 1.5<br />
<br />
I just got tired of fooling with the thing, and went back to 1.5.  When I did that everything worked fine as before.</p>
			</div>
		</div>
	</li>

	<li class="even">
		<a name="6003"></a>
		<div class="forum-post-author">
			<label class="title">greg</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2005-10-02 08:49:46</p>
            </div>
            <div class="postheader"><h3>Don't use Wordpad</h3></div>
				
			<div class="body">
				<p>Using Wordpad could be the problem. Try a different plain text editor.</p>
			</div>
		</div>
	</li>

	<li class="odd">
		<a name="6790"></a>
		<div class="forum-post-author">
			<label class="title">lelchuck</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2006-01-04 14:20:54</p>
            </div>
            <div class="postheader"><h3>Admin user not logging in after upgrade to 1.5.2</h3></div>
				
			<div class="body">
				<p>A bug that I reported going from 1.5 to 1.5.1 in the summer has reared it's ugly head again in the script for 1.52.  I could not login as an admin after updating my build to 1.5.2.<br />
<br />
 I replaced line 105 in login.php with<br />
$sql = "SELECT login, `privileges` FROM ".TABLE_PREFIX."admins WHERE login='$this_login' AND PASSWORD(password)=PASSWORD('$this_password') AND `privileges`>0";<br />
<br />
and it did the trick<br />
<br />
larry</p>
			</div>
		</div>
	</li>

	<li class="even">
		<a name="6791"></a>
		<div class="forum-post-author">
			<label class="title">joel</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2006-01-04 14:49:25</p>
            </div>
            <div class="postheader"><h3>Re: Admin user not logging in after upgrade to 1.5.2</h3></div>
				
			<div class="body">
				<p>The problem is that you do not have the language field in your admin table. I would suggest adding that field as it appears in install/db/atutor_upgrade_1.5_to_1.5.1.sql:<br />
<br />
ALTER TABLE `admins` ADD  `language` varchar(5) default '' NOT NULL AFTER `email` ;<br />
<br />
add the the correct table prefix to `admins`</p>
			</div>
		</div>
	</li>

	<li class="odd">
		<a name="6792"></a>
		<div class="forum-post-author">
			<label class="title">lelchuck</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2006-01-04 15:02:54</p>
            </div>
            <div class="postheader"><h3>Re: Admin user not logging in after upgrade to 1.5.2</h3></div>
				
			<div class="body">
				<p>I'm confused Joel<br />
<br />
I just went from 1.5.1 to 1.5.2<br />
<br />
Are you saying that the fix from the summer is not appropriate for the 1.5.2 update ... it did allow me admin access again<br />
<br />
larry</p>
			</div>
		</div>
	</li>

	<li class="even">
		<a name="6793"></a>
		<div class="forum-post-author">
			<label class="title">lelchuck</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2006-01-04 15:10:27</p>
            </div>
            <div class="postheader"><h3>Re: Admin user not logging in after upgrade to 1.5.2</h3></div>
				
			<div class="body">
				<p>I just used Navicat to add the field to the admins table.  Should there be anythingin the field for each admin?<br />
<br />
L</p>
			</div>
		</div>
	</li>

	<li class="odd">
		<a name="6794"></a>
		<div class="forum-post-author">
			<label class="title">joel</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2006-01-04 15:22:21</p>
            </div>
            <div class="postheader"><h3>Re: Admin user not logging in after upgrade to 1.5.2</h3></div>
				
			<div class="body">
				<p>For some reason your upgrade to 1.5.1 did not include that `language` field.<br />
<br />
The language field is used for admins to specifiy their language preference the way regular accounts do.<br />
<br />
Try editing your admin profile and see if it all works as expected.</p>
			</div>
		</div>
	</li>
</ul></div>

        </div>
         </div>
     </div>
          <footer class="site-footer">
              <div class="cd-color-4">
		<div class="cd-container">
         <div id="google_ads">
		 <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
		<!-- githubfoot -->
		<ins class="adsbygoogle"
     		style="display:block"
     		data-ad-client="ca-pub-2250446123648311"
     		data-ad-slot="4063107943"
     		data-ad-format="auto"></ins>
		<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
		</script>
            </div> 
		</div> 
	</div>
      </footer>
    </section>

    
  </body>
</html>
