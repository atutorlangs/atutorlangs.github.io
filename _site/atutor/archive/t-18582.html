<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.3.0 -->
<title>Enrollment Problem</title>
<meta property="og:title" content="atutorlangs.github.io" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="ATutor is an Open Source Web-based Learning Management System (LMS)." />
<meta property="og:description" content="ATutor is an Open Source Web-based Learning Management System (LMS)" />
<link rel="canonical" href="https://atutorlangs.github.io/" />
<meta property="og:url" content="https://atutorlangs.github.io/" />
<meta property="og:site_name" content="atutorlangs.github.io" />
<script type="application/ld+json">
{"name":"atutorlangs.github.io","description":"ATutor is an Open Source Web-based Learning Management System (LMS)","author":null,"@type":"WebSite","url":"https://atutorlangs.github.io/","image":null,"publisher":null,"headline":"atutorlangs.github.io","dateModified":null,"datePublished":null,"sameAs":null,"mainEntityOfPage":null,"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/assets/css/style.css?v=d21f7591e4074c34581bb4e6987280a5a8e29a48">
  </head>
  <body>
    <section class="page-header1">
     
    </section>
    <section class="main-content">
   	<a id="content" title="content area"></a>
	<div class="cd-fixed-bg cd-bg-1">
	<div class="tpbg">
		    <h1><em>AT</em>utor</h1>
	    <h2>Learning Management Tools</h2>
	    <br />
	    </div>
	</div>
	<div class="cd-scrolling-bg cd-color-2">
        <div class="clbg" style=""> 
        <div class="sidemenu1">
        <!-- Belongs at: /_includes/navigation.html -->
<nav>
<h3><a href="https://atutor.github.io/">Home</a></h3>
    
    <ul>
    <li><h3>ATutor LMS</h3>
  
        
        
          <li class=""><a href="https://atutor.github.io/atutor/index.html">ATutor Details</a></li>
        
        
          <li class=""><a href="https://atutor.github.io/atutor/downloads.html">Downloads</a></li>
        
        
          <li class=""><a href="http:s//atutor.github.io/atutor/features.html">Features</a></li>
        
        
          <li class=""><a href="https://atutor.github.io/atutor/docs/index.html">Documentation</a></li>
        
        
          <li class=""><a href="https://atutor.github.io/atutor/modules.html">Modules</a></li>
        
        
          <li class=""><a href="https://atutor.github.io/atutor/themes.html">Themes</a></li>
        
        
          <li class=""><a href="https://atutorlangs.github.io/index.html">Translation</a></li>
        
        
          <li class=""><a href="https://atutor.github.io/atutor/repositories.html">Code Repositories</a></li>
        
        
          <li class=""><a href="https://atutorlangs.github.io/atutor/archive/exported_forum1.html">Support Forum Archive</a></li>
        
      </ul>
  
    <ul>
    <li><h3>AContent LCMS</h3>
  
        
        
          <li class=""><a href="https://atutor.github.io/acontent/index.html">AContent Details</a></li>
        
        
          <li class=""><a href="https://atutor.github.io/acontent/downloads.html">Downloads</a></li>
        
        
          <li class=""><a href="https://atutor.github.io/acontent/docs/index.html">Documentation</a></li>
        
        
          <li class=""><a href="https://atutor.github.io/acontent/languages.html">Translation</a></li>
        
      </ul>
  
    <ul>
    <li><h3>Developers</h3>
  
        
        
          <li class=""><a href="https://atutor.github.io/developer/guidelines.html">Developer Docss</a></li>
        
        
          <li class=""><a href="https://atutor.github.io/developer/modules.html">Module Developer</a></li>
        
        
          <li class=""><a href="https://atutor.github.io/developer/languages.html">Translation</a></li>
        
        
          <li class=""><a href="https://github.com/atutor/ATutor/issues">Report Issues</a></li>
        
      </ul>
  
</nav>
        <hr>
        <p>Google ads disabled</p>
   <!--     <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> -->
            <!-- Sidemenu1 -->
   <!--         <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-2250446123648311"
                 data-ad-slot="8042712643"
                 data-ad-format="auto"></ins>
            <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
            </script> -->
        </div>
        <div class="contentstart">
        <ol class="breadcrumbs">
            <li><a href="https://atutor.github.io/">Home</a></li>
            
        </ol>
        <div class='threadlist'>
<br /><div><a href='exported_forum1.html' class='midtext'>Back to: Thread list</a></div>
<br /><br /><div><strong>Pages:</strong><a href="exported_forum1.html?page=1">1</a> <a href="exported_forum2.html?page=2">2</a> <a href="exported_forum3.html?page=3">3</a> <a href="exported_forum4.html?page=4">4</a> <strong><a href="exported_forum5.html">5</a></strong> <a href="exported_forum6.html?page=6">6</a> <a href="exported_forum7.html?page=7">7</a> <a href="exported_forum8.html?page=8">8</a> <a href="exported_forum9.html?page=9">9</a> <a href="exported_forum10.html?page=10">10</a> <a href="exported_forum11.html?page=11">11</a> <a href="exported_forum12.html?page=12">12</a> <a href="exported_forum13.html?page=13">13</a> <a href="exported_forum14.html?page=14">14</a> <a href="exported_forum15.html?page=15">15</a> </div>
<div><p><br /><h3>Enrollment Problem</h3></div><br />
<div><ul class='forum-thread'>

	<li class="even">
		<a name="18582"></a>
		<div class="forum-post-author">
			<label class="title">sal399</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2009-09-05 01:04:54</p>
            </div>
            <div class="postheader"><h3>Enrollment Problem</h3></div>
				
			<div class="body">
				<p>The program has been working like peach until a new error came across today. Under the Atutor admin I wanted to take a look at the enrollment for a particular course so I clicked on the enrollment tab. Then for some reason it takes me to a course (in this case the course is calles Domain 3) There, it tells me whether to enroll etc. On the top of the navigation menu( top ) I get the following error:<br />
<br />
mysql_fetch_assoc(): supplied argument is not a valid MySQL result resource in ....../ATutor/include/lib/menu_pages.php on line 316<br />
<br />
Any thoughts on this little glitch?<br />
<br />
<br />
Thanks!!!!!<br />
<br />
Database:MySQL<br />
11.13 MB<br />
Disk Usage:<br />
502.34 MB<br />
Courses:<br />
12<br />
Users:<br />
998<br />
ATutor Version:<br />
1.6.2. Check Latest Version.<br />
PHP Version:<br />
5.2.10<br />
MySQL Version:<br />
5.0.77-log<br />
OS:<br />
Linux 2.6.18-128.7.1.el5PAE<br />
Web browser being used - IE 8</p>
			</div>
		</div>
	</li>

	<li class="odd">
		<a name="18587"></a>
		<div class="forum-post-author">
			<label class="title">greg</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2009-09-06 09:19:01</p>
            </div>
            <div class="postheader"><h3>Re: Enrollment Problem</h3></div>
				
			<div class="body">
				<p>Using something like phpMyAdmin, inspect the AT_messages table to see if it contains data, and that is structure is as follows:<br />
<br />
[php]<br />
CREATE TABLE `messages` (<br />
  `message_id` mediumint(8) unsigned NOT NULL auto_increment,<br />
  `course_id` mediumint(8) unsigned NOT NULL default '0',<br />
  `from_member_id` mediumint(8) unsigned NOT NULL default '0',<br />
  `to_member_id` mediumint(8) unsigned NOT NULL default '0',<br />
  `date_sent` TIMESTAMP NOT NULL,<br />
  `new` tinyint(4) NOT NULL default '0',<br />
  `replied` tinyint(4) NOT NULL default '0',<br />
  `subject` VARCHAR(255) NOT NULL ,<br />
  `body` text NOT NULL ,<br />
  PRIMARY KEY  (`message_id`),<br />
  KEY `to_member_id` (`to_member_id`)<br />
) TYPE=MyISAM;<br />
<br />
<br />
<br />
[/php]</p>
			</div>
		</div>
	</li>

	<li class="even">
		<a name="18590"></a>
		<div class="forum-post-author">
			<label class="title">sal399</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2009-09-06 17:19:54</p>
            </div>
            <div class="postheader"><h3>Re: Enrollment Problem</h3></div>
				
			<div class="body">
				<p>Greg,<br />
<br />
 Here's the structure:<br />
<br />
message_id  mediumint(8)  No      <br />
course_id  mediumint(8)  No  0    <br />
from_member_id  mediumint(8)  No  0    <br />
to_member_id  mediumint(8)  No  0    <br />
date_sent  timestamp No  CURRENT_TIMESTAMP    <br />
new  tinyint(4) No  0    <br />
replied  tinyint(4) No  0    <br />
subject  varchar(150) No      <br />
body  mediumtext No      <br />
<br />
<br />
Indexes: Keyname Type Cardinality Field <br />
PRIMARY  PRIMARY 191   message_id  <br />
to_member_id  INDEX 31   to_member_id  <br />
<br />
I spoke with the hosting and they told me they did an upgrade on the PHP....would that have created a problem? It seems kind of odd......</p>
			</div>
		</div>
	</li>

	<li class="odd">
		<a name="18591"></a>
		<div class="forum-post-author">
			<label class="title">sal399</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2009-09-06 17:26:41</p>
            </div>
            <div class="postheader"><h3>Re: Enrollment Problem</h3></div>
				
			<div class="body">
				<p>the other thing that I noticed is that if I login as a professor, I can work within the enrollment with no problem. But as an Admin, I get that funky layout. If I try to click on one of the enrollement options (enrolled,assistants,alumni etc.) it kicks me out and logs me out. I just wonder if the upgrade on the PHP messed up the query to the enrollment table? All other Admin options work just fine with no PHP errors.</p>
			</div>
		</div>
	</li>

	<li class="even">
		<a name="18598"></a>
		<div class="forum-post-author">
			<label class="title">sal399</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2009-09-07 11:57:19</p>
            </div>
            <div class="postheader"><h3>Re: Enrollment Problem</h3></div>
				
			<div class="body">
				<p>The tables do have data Greg....any other thoughts?</p>
			</div>
		</div>
	</li>

	<li class="odd">
		<a name="18613"></a>
		<div class="forum-post-author">
			<label class="title">greg</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2009-09-08 15:13:24</p>
            </div>
            <div class="postheader"><h3>Re: Enrollment Problem</h3></div>
				
			<div class="body">
				<p>I'm guessing you have made modifications to the file, since there is no mysql query on line 316. <br />
<br />
You can try replacing the file with a fresh copy:<br />
<br />
http://atutorsvn.atrc.utoronto.ca/repos/atutor/trunk/docs/include/lib/menu_pages.php</p>
			</div>
		</div>
	</li>

	<li class="even">
		<a name="18617"></a>
		<div class="forum-post-author">
			<label class="title">sal399</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2009-09-08 20:17:28</p>
            </div>
            <div class="postheader"><h3>Re: Enrollment Problem</h3></div>
				
			<div class="body">
				<p>I did modify the code ....it worked fine before hmmmmm I did the upgrade in February so it worked fine. An upgrade to PHP was done two weeks ago and lately that's when I noticed the error. If you can briefly look over the code if it's not too much to ask for...The code is:<br />
<br />
&lt;?php<br />
/************************************************************************/<br />
/* ATutor																*/<br />
/************************************************************************/<br />
/* Copyright (c) 2002-2008 by Greg Gay, Joel Kronenberg & Heidi Hazelton*/<br />
/* Adaptive Technology Resource Centre / University of Toronto			*/<br />
/* http://atutor.ca														*/<br />
/*																		*/<br />
/* This program is free software. You can redistribute it and/or		*/<br />
/* modify it under the terms of the GNU General Public License			*/<br />
/* as published by the Free Software Foundation.						*/<br />
/************************************************************************/<br />
// $Id: menu_pages.php 8241 2008-11-20 15:33:30Z hwong $<br />
if (!defined('AT_INCLUDE_PATH')) { exit; }<br />
<br />
/*<br />
	5 sections: public, my_start_page, course, admin, home<br />
*/<br />
if (isset($_pages[AT_NAV_ADMIN])) {<br />
	array_unshift($_pages[AT_NAV_ADMIN], 'admin/index.php', 'admin/modules/index.php');<br />
}<br />
global $_config;<br />
if($_config['allow_registration']){<br />
	$reg_tab = "registration.php";<br />
}<br />
//  edited /////////////////////////////<br />
//$_pages[AT_NAV_PUBLIC] = array_merge(array('login.php',$reg_tab,'browse.php'), (isset($_pages[AT_NAV_PUBLIC]) ? $_pages[AT_NAV_PUBLIC] : array()));<br />
//$_pages[AT_NAV_START]  = array_merge(array('users/index.php',  'users/profile.php', 'users/preferences.php'), (isset($_pages[AT_NAV_START]) ? (array) $_pages[AT_NAV_START] : array()));<br />
$_pages[AT_NAV_PUBLIC] = array_merge(array('browse.php'), (isset($_pages[AT_NAV_PUBLIC]) ? $_pages[AT_NAV_PUBLIC] : array()));<br />
$_pages[AT_NAV_START]  = array_merge(array('users/index.php',  'users/preferences.php'), (isset($_pages[AT_NAV_START]) ? (array) $_pages[AT_NAV_START] : array()));<br />
// end edited /////////////////////////////<br />
$_pages[AT_NAV_COURSE] = array('index.php');<br />
$_pages[AT_NAV_HOME]   = array();<br />
<br />
if (isset($_SESSION['course_id']) && $_SESSION['course_id'] > 0) {<br />
	$main_links = $home_links = $side_menu = array();<br />
<br />
	if ($system_courses[$_SESSION['course_id']]['main_links']) {<br />
		$main_links = explode('|', $system_courses[$_SESSION['course_id']]['main_links']);<br />
		foreach ($main_links as $link) {<br />
			if (isset($_pages[$link])) {<br />
				$_pages[$link]['parent'] = AT_NAV_COURSE;<br />
			}<br />
		}<br />
		$_pages[AT_NAV_COURSE] = array_merge($_pages[AT_NAV_COURSE], $main_links);<br />
	}<br />
<br />
	if ($system_courses[$_SESSION['course_id']]['home_links']) {<br />
		$home_links = explode('|', $system_courses[$_SESSION['course_id']]['home_links']);<br />
		foreach ($home_links as $link) {<br />
			if (isset($_pages[$link])) {<br />
				$_pages[AT_NAV_HOME][] = $link;<br />
			}<br />
		}<br />
	}<br />
<br />
	if (authenticate(AT_PRIV_ADMIN, AT_PRIV_RETURN)) {<br />
		$_pages[AT_NAV_COURSE][] = 'tools/index.php';		<br />
	} else if ($_SESSION['privileges']) {<br />
		<br />
		/**<br />
		 * the loop and all this module priv checking is done to hide the Manage tab<br />
		 * when this student has privileges, but no items linked from the Manage tab.<br />
		 * Example: the File Storage privilege does not have a Manage tab item.<br />
		 * In the best case it stops after the first found link.<br />
		 * In the worst case it goes through all the modules and doesn't find a link.<br />
		 */<br />
		$module_list = $moduleFactory->getModules(AT_MODULE_STATUS_ENABLED, 0, TRUE);<br />
		$keys = array_keys($module_list);<br />
<br />
		foreach ($keys as $module_name) {<br />
			$module =& $module_list[$module_name];<br />
			if ($module->getPrivilege() && authenticate($module->getPrivilege(), AT_PRIV_RETURN) && ($module->getChildPage('tools/index.php'))) {<br />
				$_pages[AT_NAV_COURSE][] = 'tools/index.php';<br />
				break;<br />
			}<br />
		}<br />
	}<br />
} else if (isset($_SESSION['course_id']) && $_SESSION['course_id'] == -1) {<br />
	/* admin pages */<br />
<br />
	$_pages['admin/index.php']['title_var'] = 'home';<br />
	$_pages['admin/index.php']['parent']    = AT_NAV_ADMIN;<br />
	$_pages['admin/index.php']['guide']     = 'admin/?p=configuration.php';<br />
	$_pages['admin/index.php']['children'] = array_merge(array('admin/admins/my_edit.php', 'admin/admins/my_password.php'), isset($_pages['admin/index.php']['children']) ?  $_pages['admin/index.php']['children'] : array());<br />
<br />
	$_pages['admin/admins/my_edit.php']['title_var'] = 'my_account';<br />
	$_pages['admin/admins/my_edit.php']['parent']    = 'admin/index.php';<br />
	$_pages['admin/admins/my_edit.php']['guide']     = 'admin/?p=my_account.php';<br />
<br />
	$_pages['admin/admins/my_password.php']['title_var'] = 'change_password';<br />
	$_pages['admin/admins/my_password.php']['parent']    = 'admin/index.php';<br />
<br />
	if (admin_authenticate(AT_ADMIN_PRIV_USERS, AT_PRIV_RETURN)) {<br />
		$_pages[AT_NAV_ADMIN][] = 'admin/config_edit.php';<br />
<br />
		$_pages['admin/config_edit.php']['title_var'] = 'system_preferences';<br />
		$_pages['admin/config_edit.php']['parent']    = AT_NAV_ADMIN;<br />
		$_pages['admin/config_edit.php']['guide']     = 'admin/?p=system_preferences.php';<br />
		$_pages['admin/config_edit.php']['children']  = array_merge((array) $_pages['admin/config_edit.php']['children'], array('admin/error_logging.php'));<br />
	}<br />
	$_pages['admin/fix_content.php']['title_var'] = 'fix_content_ordering';<br />
	$_pages['admin/fix_content.php']['parent']    = 'admin/index.php';<br />
<br />
	$_pages['admin/error_logging.php']['title_var'] = 'error_logging';<br />
	$_pages['admin/error_logging.php']['parent']    = 'admin/config_edit.php';<br />
	$_pages['admin/error_logging.php']['guide']     = 'admin/?p=error_logging.php';<br />
	$_pages['admin/error_logging.php']['children']  = array_merge(array('admin/error_logging_bundle.php', 'admin/error_logging_reset.php'), isset($_pages['admin/error_logging.php']['children']) ? $_pages['admin/error_logging.php']['children'] : array());<br />
<br />
	$_pages['admin/error_logging_reset.php']['title_var'] = 'reset_log';<br />
	$_pages['admin/error_logging_reset.php']['parent']    = 'admin/error_logging.php';<br />
<br />
	$_pages['admin/error_logging_bundle.php']['title_var'] = 'report_errors';<br />
	$_pages['admin/error_logging_bundle.php']['parent']    = 'admin/error_logging.php';<br />
<br />
	$_pages['admin/error_logging_details.php']['title_var'] = 'viewing_profile_bugs';<br />
	$_pages['admin/error_logging_details.php']['parent']    = 'admin/error_logging.php';<br />
<br />
	$_pages['admin/error_logging_view.php']['title_var'] = 'viewing_errors';<br />
	$_pages['admin/error_logging_view.php']['parent']    = 'admin/error_logging_details.php';<br />
<br />
	if (admin_authenticate(AT_ADMIN_PRIV_ADMIN, TRUE)) {<br />
		// hide modules from non-super admins<br />
		$_pages['admin/modules/index.php']['title_var'] = 'modules';<br />
		$_pages['admin/modules/index.php']['parent']    = AT_NAV_ADMIN;<br />
		$_pages['admin/modules/index.php']['guide']     = 'admin/?p=modules.php';<br />
		$_pages['admin/modules/index.php']['children']  = array('admin/modules/install_modules.php');<br />
<br />
		$_pages['admin/modules/details.php']['title_var'] = 'details';<br />
		$_pages['admin/modules/details.php']['parent']    = 'admin/modules/index.php';<br />
<br />
		$_pages['admin/modules/module_uninstall_step_1.php']['title_var'] = 'module_uninstall';<br />
		$_pages['admin/modules/module_uninstall_step_1.php']['parent']    = 'admin/modules/index.php';<br />
<br />
		$_pages['admin/modules/module_uninstall_step_2.php']['title_var'] = 'module_uninstall';<br />
		$_pages['admin/modules/module_uninstall_step_2.php']['parent']    = 'admin/modules/index.php';<br />
<br />
		$_pages['admin/modules/module_uninstall_step_3.php']['title_var'] = 'module_uninstall';<br />
		$_pages['admin/modules/module_uninstall_step_3.php']['parent']    = 'admin/modules/index.php';<br />
<br />
		$_pages['admin/modules/install_modules.php']['title_var'] = 'install_modules';<br />
		$_pages['admin/modules/install_modules.php']['parent']    = 'admin/modules/index.php';<br />
		$_pages['admin/modules/install_modules.php']['guide']     = 'admin/?p=modules.php';<br />
<br />
		$_pages['admin/modules/version_history.php']['title_var'] = 'version_history';<br />
		$_pages['admin/modules/version_history.php']['parent']    = 'admin/modules/install_modules.php';<br />
<br />
		$_pages['admin/modules/module_install_step_1.php']['title_var'] = 'details';<br />
		$_pages['admin/modules/module_install_step_1.php']['parent']    = 'admin/modules/install_modules.php';<br />
<br />
		$_pages['admin/modules/module_install_step_2.php']['title_var'] = 'details';<br />
		$_pages['admin/modules/module_install_step_2.php']['parent']    = 'admin/modules/install_modules.php';<br />
<br />
		$_pages['admin/modules/module_install_step_3.php']['title_var'] = 'details';<br />
		$_pages['admin/modules/module_install_step_3.php']['parent']    = 'admin/modules/install_modules.php';<br />
<br />
			$_pages['admin/modules/confirm.php']['title_var'] = 'confirm';<br />
			$_pages['admin/modules/confirm.php']['parent']    = 'admin/modules/add_new.php';<br />
<br />
		$_pages['admin/cron_config.php']['title_var'] = 'cron_config';<br />
		$_pages['admin/cron_config.php']['parent']    = 'admin/config_edit.php';<br />
		$_pages['admin/cron_config.php']['guide']     = 'admin/?p=cron_setup.php';<br />
		$_pages['admin/config_edit.php']['children']  = array_merge((array) $_pages['admin/config_edit.php']['children'], array('admin/cron_config.php'));<br />
<br />
		$_pages['admin/auto_enroll.php']['title_var'] = 'auto_enroll';<br />
		$_pages['admin/auto_enroll.php']['parent']    = 'admin/config_edit.php';<br />
		$_pages['admin/auto_enroll.php']['guide']     = 'admin/?p=auto_enroll.php';<br />
		$_pages['admin/auto_enroll.php']['children']  = array_merge(array('admin/auto_enroll_edit.php'));<br />
		$_pages['admin/config_edit.php']['children']  = array_merge((array) $_pages['admin/config_edit.php']['children'], array('admin/auto_enroll.php'));<br />
<br />
		$_pages['admin/auto_enroll_edit.php']['title_var'] = 'auto_enroll_edit';<br />
		$_pages['admin/auto_enroll_edit.php']['parent']    = 'admin/auto_enroll.php';<br />
	<br />
		$_pages['admin/auto_enroll_delete.php']['title_var'] = 'auto_enroll_delete';<br />
		$_pages['admin/auto_enroll_delete.php']['parent']    = 'admin/auto_enroll.php';<br />
	<br />
	}<br />
}<br />
<br />
<br />
/* public pages */<br />
$_pages['registration.php']['title_var'] = 'register';<br />
$_pages['registration.php']['parent']    = AT_NAV_PUBLIC;<br />
$_pages['registration.php']['children']  = isset($_pages['browse.php']['children']) ? $_pages['browse.php']['children'] : array();<br />
$_pages['registration.php']['guide']     = 'general/?p=register.php';<br />
<br />
$_pages['browse.php']['title_var'] = 'browse_courses';<br />
//  edited /////////////////////////////<br />
//$_pages['browse.php']['parent']    = AT_NAV_PUBLIC;<br />
$_pages['browse.php']['parent']    = 'users/index.php';<br />
// end edited /////////////////////////////<br />
$_pages['browse.php']['children']  = isset($_pages['browse.php']['children']) ? $_pages['browse.php']['children'] : array();<br />
$_pages['browse.php']['guide']     = 'general/?p=browse_courses.php';<br />
<br />
$_pages['login.php']['title_var'] = 'login';<br />
$_pages['login.php']['parent']    = AT_NAV_PUBLIC;<br />
$_pages['login.php']['children']  = array_merge(array('password_reminder.php'), isset($_pages['login.php']['children']) ? $_pages['login.php']['children'] : array());<br />
$_pages['login.php']['guide']     = 'general/?p=login.php';<br />
<br />
$_pages['confirm.php']['title_var'] = 'confirm';<br />
$_pages['confirm.php']['parent']    = AT_NAV_PUBLIC;<br />
<br />
$_pages['password_reminder.php']['title_var'] = 'password_reminder';<br />
$_pages['password_reminder.php']['parent']    = 'login.php';<br />
$_pages['password_reminder.php']['guide']     = 'general/?p=password_reminder.php';<br />
<br />
$_pages['logout.php']['title_var'] = 'logout';<br />
$_pages['logout.php']['parent']    = AT_NAV_PUBLIC;<br />
<br />
/* my start page pages */<br />
$_pages['users/index.php']['title_var'] = 'my_courses';<br />
$_pages['users/index.php']['parent']    = AT_NAV_START;<br />
$_pages['users/index.php']['guide']     = 'general/?p=my_courses.php';<br />
if (isset($_SESSION['member_id']) && $_SESSION['member_id'] && (!isset($_SESSION['course_id']) || !$_SESSION['course_id'])) {<br />
//  edited ///////////////////<br />
//	if ((get_instructor_status() === FALSE) && (!defined('ALLOW_INSTRUCTOR_REQUESTS') || !ALLOW_INSTRUCTOR_REQUESTS)) {<br />
	if (get_instructor_status() === FALSE) {<br />
// end edited ////////////////////<br />
		$_pages['users/index.php']['children']  = array_merge(array('users/browse.php'), (array) $_pages['users/index.php']['children']);<br />
	} else {<br />
		$_pages['users/index.php']['children']  = array_merge(array('users/browse.php', 'users/create_course.php'), isset($_pages['users/index.php']['children']) ? $_pages['users/index.php']['children'] : array());<br />
	}<br />
}<br />
	<br />
	$_pages['users/browse.php']['title_var'] = 'browse_courses';<br />
	$_pages['users/browse.php']['parent']    = 'users/index.php';<br />
	$_pages['users/browse.php']['guide']     = 'general/?p=browse_courses.php';<br />
	<br />
//  added /////////////////////////////<br />
	$_pages['browse.php']['title_var'] = 'all_courses';<br />
	$_pages['browse.php']['parent']    = 'users/index.php';<br />
//////////////////////////////////////  <br />
<br />
	$_pages['users/create_course.php']['title_var'] = 'create_course';<br />
	$_pages['users/create_course.php']['parent']    = 'users/index.php';<br />
	$_pages['users/create_course.php']['guide']    = 'instructor/?p=creating_courses.php';<br />
<br />
	$_pages['users/private_enroll.php']['title_var'] = 'enroll';<br />
	$_pages['users/private_enroll.php']['parent']    = 'users/index.php';<br />
<br />
	$_pages['users/remove_course.php']['title_var'] = 'unenroll';<br />
	$_pages['users/remove_course.php']['parent']    = 'users/index.php';<br />
<br />
$_pages['users/profile.php']['title_var']    = 'profile';<br />
$_pages['users/profile.php']['parent']   = AT_NAV_START;<br />
$_pages['users/profile.php']['guide']     = 'general/?p=profile.php';<br />
$_pages['users/profile.php']['children']  = array_merge(array('users/password_change.php', 'users/email_change.php'), (array) $_pages['users/profile.php']['children']);<br />
<br />
	$_pages['users/password_change.php']['title_var'] = 'change_password';<br />
	$_pages['users/password_change.php']['parent']    = 'users/profile.php';<br />
	//$_pages['users/password_change.php']['guide']    = 'instructor/?p=creating_courses.php';<br />
<br />
	$_pages['users/email_change.php']['title_var'] = 'change_email';<br />
	$_pages['users/email_change.php']['parent']    = 'users/profile.php';<br />
<br />
$_pages['users/preferences.php']['title_var']  = 'preferences';<br />
$_pages['users/preferences.php']['parent'] = AT_NAV_START;<br />
$_pages['users/preferences.php']['guide']  = 'general/?p=preferences.php';<br />
<br />
<br />
/* course pages */<br />
$_pages['index.php']['title_var']  = 'home';<br />
$_pages['index.php']['parent'] = AT_NAV_COURSE;<br />
<br />
$_pages['enroll.php']['title_var']  = 'enroll';<br />
$_pages['enroll.php']['parent'] = AT_NAV_COURSE;<br />
<br />
/* instructor pages: */<br />
$_pages['tools/index.php']['title_var'] = 'manage';<br />
$_pages['tools/index.php']['parent']    = AT_NAV_COURSE;<br />
<br />
$_pages['inbox/index.php']['title_var'] = 'inbox';<br />
$_pages['inbox/index.php']['children']  = array_merge(array('inbox/sent_messages.php', 'inbox/send_message.php', 'inbox/export.php'), isset($_pages['inbox/index.php']['children']) ? $_pages['inbox/index.php']['children'] : array());<br />
<br />
	$_pages['inbox/sent_messages.php']['title_var'] = 'sent_messages';<br />
	$_pages['inbox/sent_messages.php']['parent']    = 'inbox/index.php';<br />
<br />
	$_pages['inbox/send_message.php']['title_var'] = 'send_message';<br />
	$_pages['inbox/send_message.php']['parent']    = 'inbox/index.php';<br />
<br />
	$_pages['inbox/export.php']['title_var'] = 'export';<br />
	$_pages['inbox/export.php']['parent']    = 'inbox/index.php';<br />
<br />
$_pages['profile.php']['title_var'] = 'profile';<br />
$_pages['profile.php']['parent']    = 'index.php';<br />
<br />
<br />
/* global pages */<br />
$_pages['about.php']['title_var']  = 'about_atutor';<br />
<br />
$_pages['404.php']['title_var']  = '404';<br />
<br />
$_pages['help/index.php']['title_var']  = 'help';<br />
$_pages['help/index.php']['children'] = array_merge(array('help/accessibility.php', 'help/contact_support.php'), isset($_pages['help/index.php']['children']) ? $_pages['help/index.php']['children'] : array());<br />
<br />
	$_pages['help/accessibility.php']['title_var']  = 'accessibility';<br />
	$_pages['help/accessibility.php']['parent'] = 'help/index.php';<br />
<br />
	$_pages['help/contact_support.php']['title_var']  = 'contact_support';<br />
	$_pages['help/contact_support.php']['parent'] = 'help/index.php';<br />
<br />
<br />
$_pages['contact_instructor.php']['title_var']  = 'contact_instructor';<br />
<br />
$current_page = substr($_SERVER['PHP_SELF'], strlen($_base_path));<br />
<br />
function get_num_new_messages() {<br />
	global $db;<br />
	static $num_messages;<br />
<br />
	if (isset($num_messages)) {<br />
		return $num_messages;<br />
	}<br />
	$sql    = "SELECT COUNT(*) AS cnt FROM ".TABLE_PREFIX."messages WHERE to_member_id=$_SESSION[member_id] AND new=1";<br />
	$result = mysql_query($sql, $db);<br />
	$row    = mysql_fetch_assoc($result);<br />
	$num_messages = $row['cnt'];<br />
<br />
	return $num_messages;<br />
}<br />
<br />
function get_main_navigation($current_page) {<br />
	global $_pages, $_base_path;<br />
<br />
	$parent_page = $_pages[$current_page]['parent'];<br />
	$_top_level_pages = array();<br />
<br />
	if (isset($parent_page) && defined($parent_page)) {<br />
		foreach($_pages[$parent_page] as $page) {<br />
			if (isset($_pages[$page])) {<br />
				if (isset($_pages[$page]['title'])) {<br />
					$_page_title = $_pages[$page]['title'];<br />
				} else {<br />
					$_page_title = _AT($_pages[$page]['title_var']);<br />
				}<br />
				<br />
				$_top_level_pages[] = array('url' => $_base_path . url_rewrite($page), 'title' => $_page_title);<br />
			}<br />
		}<br />
	} else if (isset($parent_page)) {<br />
		return get_main_navigation($parent_page);<br />
	}<br />
<br />
	return $_top_level_pages;<br />
}<br />
<br />
function get_current_main_page($current_page) {<br />
	global $_pages, $_base_path;<br />
<br />
	$parent_page = $_pages[$current_page]['parent'];<br />
<br />
	if (isset($parent_page) && defined($parent_page)) {<br />
		return $_base_path . url_rewrite($current_page);<br />
	} else if (isset($parent_page)) {<br />
		return get_current_main_page($parent_page);<br />
	}<br />
}<br />
<br />
function get_sub_navigation($current_page) {<br />
	global $_pages, $_base_path;<br />
<br />
	if (isset($current_page) && defined($current_page)) {<br />
		// reached the top<br />
		return array();<br />
	} else if (isset($_pages[$current_page]['children'])) {<br />
		if (isset($_pages[$current_page]['title'])) {<br />
			$_page_title = $_pages[$current_page]['title'];<br />
		} else {<br />
			$_page_title = _AT($_pages[$current_page]['title_var']);<br />
		}<br />
<br />
		$_sub_level_pages[] = array('url' => $_base_path . $current_page, 'title' => $_page_title);<br />
		foreach ($_pages[$current_page]['children'] as $child) {<br />
<br />
			if (isset($_pages[$child]['title'])) {<br />
				$_page_title = $_pages[$child]['title'];<br />
			} else {<br />
				$_page_title = _AT($_pages[$child]['title_var']);<br />
			}<br />
<br />
			$_sub_level_pages[] = array('url' => $_base_path . $child, 'title' => $_page_title, 'has_children' => isset($_pages[$child]['children']));<br />
		}<br />
	} else if (isset($_pages[$current_page]['parent'])) {<br />
		// no children<br />
<br />
		$parent_page = $_pages[$current_page]['parent'];<br />
		return get_sub_navigation($parent_page);<br />
	}<br />
<br />
	return $_sub_level_pages;<br />
}<br />
<br />
function get_current_sub_navigation_page($current_page) {<br />
	global $_pages, $_base_path;<br />
<br />
	$parent_page = $_pages[$current_page]['parent'];<br />
<br />
	if (isset($parent_page) && defined($parent_page)) {<br />
		return $_base_path . $current_page;<br />
	} else {<br />
		return $_base_path . $current_page;<br />
	}<br />
}<br />
<br />
function get_path($current_page) {<br />
	global $_pages, $_base_path;<br />
<br />
	$parent_page = $_pages[$current_page]['parent'];<br />
<br />
	if (isset($_pages[$current_page]['title'])) {<br />
		$_page_title = $_pages[$current_page]['title'];<br />
	} else {<br />
		$_page_title = _AT($_pages[$current_page]['title_var']);<br />
	}<br />
<br />
	if (isset($parent_page) && defined($parent_page)) {<br />
		$path[] = array('url' => $_base_path . url_rewrite($current_page), 'title' => $_page_title);<br />
		return $path;<br />
	} else if (isset($parent_page)) {<br />
		$path[] = array('url' => $_base_path . url_rewrite($current_page), 'title' => $_page_title);<br />
		$path = array_merge((array) $path, get_path($parent_page));<br />
	} else {<br />
		$path[] = array('url' => $_base_path . url_rewrite($current_page), 'title' => $_page_title);<br />
	}<br />
	<br />
	return $path;<br />
}<br />
<br />
function get_home_navigation() {<br />
	global $_pages, $_base_path;<br />
<br />
	$home_links = array();<br />
	foreach ($_pages[AT_NAV_HOME] as $child) {<br />
		if (isset($_pages[$child])) {<br />
			if (isset($_pages[$child]['title'])) {<br />
				$title = $_pages[$child]['title'];<br />
			} else {<br />
				$title = _AT($_pages[$child]['title_var']);<br />
			}<br />
			$home_links[] = array('url' => $_base_path . url_rewrite($child), 'title' => $title, 'img' => $_base_path.$_pages[$child]['img']);<br />
		}<br />
	}<br />
<br />
	return $home_links;<br />
}<br />
?></p>
			</div>
		</div>
	</li>

	<li class="odd">
		<a name="18624"></a>
		<div class="forum-post-author">
			<label class="title">greg</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2009-09-09 08:50:40</p>
            </div>
            <div class="postheader"><h3>Re: Enrollment Problem</h3></div>
				
			<div class="body">
				<p>The query on line 316 is fine. It would only report the error if there was no value for $_SESSION['member_id'].<br />
<br />
You can turn on the debug() function at the top of the include/vitals.inc.php file to determine if the member ID is set when this page loads.<br />
<br />
If you have altered other files, please tell us.</p>
			</div>
		</div>
	</li>

	<li class="even">
		<a name="18629"></a>
		<div class="forum-post-author">
			<label class="title">sal399</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2009-09-09 17:19:26</p>
            </div>
            <div class="postheader"><h3>Re: Enrollment Problem</h3></div>
				
			<div class="body">
				<p>I have made changes to config.inc and css but that's about it. I added a source to the script:<br />
$select =mysql_select_db('');<br />
<br />
It works now but I think that the hosting was troubleshooting after a PHP upgrade and it fixed that problem by accident. Everything is running smoothly.<br />
<br />
If I run the patches....for my version will it overwrite my configs?</p>
			</div>
		</div>
	</li>

	<li class="odd">
		<a name="18630"></a>
		<div class="forum-post-author">
			<label class="title">greg</label><br />
		</div>

		<div class="forum-post-content">
			
			<div class="date">
                <p>2009-09-09 17:43:58</p>
            </div>
            <div class="postheader"><h3>Re: Enrollment Problem</h3></div>
				
			<div class="body">
				<p>You should be fine applying patches. It will warn you if its going to overwrite a customization.</p>
			</div>
		</div>
	</li>
</ul></div>

        </div>
         </div>
     </div>
          <footer class="site-footer">
              <div class="cd-color-4">
		<div class="cd-container">
		<p>Google ads disabled</p>
          <!--  <div id="google_ads">
                <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
            
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-2250446123648311"
                     data-ad-slot="1271814276"
                     data-ad-format="auto"></ins>
                <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div> -->
		</div> 
	</div>
      </footer>
    </section>

    
  </body>
</html>
